<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Lounge by Suite 88</title>
  <link rel="stylesheet" href="main-style.css">
</head>
<body>
  <div class="container">
    <h1>â˜• The Lounge by Suite 88</h1>
    <p>Welcome! Please place your order below.</p>

    <form id="orderForm">
      <label>Name: <input type="text" name="name" required></label><br>
      <label>Table Number / Pickup: <input type="text" name="table" required></label><br>

      <h2>â˜• Coffee & Beverages</h2>
      <label><input type="checkbox" name="items" value="Hot/Iced Chocolate - 26" data-price="26"> Hot/Iced Chocolate - 26 AED</label><br>
      <label><input type="checkbox" name="items" value="Mocha Latte - 25" data-price="25"> Mocha Latte - 25 AED</label><br>
      <!-- Add more items as before, make sure each has data-price -->

      <h2>ğŸ° Desserts</h2>
      <label><input type="checkbox" name="items" value="Frostie Ice Cream - 25" data-price="25"> Frostie Ice Cream - 25 AED</label><br>
      <!-- Add more items as before -->

      <h2>ğŸ¥ª Meals</h2>
      <label><input type="checkbox" name="items" value="Avocado Toast - 40" data-price="40"> Avocado Toast - 40 AED</label><br>
      <!-- Add more items as before -->

      <h2>ğŸµ Tea</h2>
      <label><input type="checkbox" name="items" value="Flavoured Tea - 12" data-price="12"> Flavoured Tea - 12 AED</label><br>
      <!-- Add more items as before -->

      <h2>ğŸ¥¤ Milkshakes / Protein</h2>
      <label><input type="checkbox" name="items" value="Pistachio - 40" data-price="40"> Pistachio - 40 AED</label><br>
      <!-- Add more items as before -->

      <h2>ğŸ“ Special Request</h2>
      <textarea name="request" placeholder="e.g., Less sugar, extra hot..." style="width:100%;height:60px;"></textarea><br>

      <p id="total">Total: 0 AED</p>

      <button type="submit">Place Order</button>
    </form>

    <div id="message"></div>
  </div>

  <script>
    const form = document.getElementById('orderForm');
    const checkboxes = form.querySelectorAll('input[type="checkbox"]');
    const totalDisplay = document.getElementById('total');

    function updateTotal() {
      let total = 0;
      checkboxes.forEach(cb => {
        if (cb.checked) {
          total += parseInt(cb.dataset.price);
        }
      });
      totalDisplay.textContent = `Total: ${total} AED`;
    }

    checkboxes.forEach(cb => cb.addEventListener('change', updateTotal));

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = {
        name: formData.get('name'),
        table: formData.get('table'),
        request: formData.get('request'),
        items: formData.getAll('items')
      };

      const res = await fetch('/submit-order', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const result = await res.text();
      document.getElementById('message').innerText = result;
      form.reset();
      totalDisplay.textContent = "Total: 0 AED";
    });
  </script>
</body>
</html>
